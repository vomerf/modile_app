modile_app

Стек технологий:
- Python 3.10 и выше скачать можно по ссылке https://www.python.org/downloads/
- FastAPI
- Docker version 20.10.24 скачать можно по ссылке https://www.docker.com/
- Uvicorn
- Poetry
- SQLAlchemy version 2.0 и выше

## Описание приложения.

### Modile_app это простой API для мобильного приложения, в котором полевой сотрудник заказчика будет выполнять визиты в магазины.

Для того чтобы развернуть приложение и проверить его функциональность требуется скачать приложение с gitgub к себе и запустить приложение через Docker для этого он должен быть установлен.<br>
После того как вы скачали с gitgub проект нужно выполнить команду `docker-compose up -d` с флагом -d если не хотите чтобы логи появлялись в вашем терминале.<br>
Если у вас нет образов, докер автоматически скачает образ postgres c dockerhub и соберет образ приложения и запустить это все, все что вам остается это открыть документацию<br>
http://127.0.0.1:8000/docs.
Чтобы контейнер с базой данных запустился докер прокидывает .env файл с параметрами подключения.<br>
Есть файл пример .env_example чтобы база запустилась достаточно просто переименовать этот файл в .env .<br>
.env файл не следует выкладывать в публичный репозиторий так как там могут содержаться личная информация, различные ключи доступа и так далее.<br>

Чтобы заполнить базу данных тестовыми данными запустите файл `fill_database.py`.<br>
Панель администратора находится по адресу http://127.0.0.1:8000/admin.<br>

Реализована проверка пользователя по номеру телефона на всех ручках за исключением<br>
получения данных GET запросов. Для того чтобы проверка прошла нужно указать id заказчика и номер телефона<br>
по которым и будет происходить проверка.<br>

Примеры запросов:<br>
Тестировать код можно сразу в Swagger.<br>
Примеры буду показывать на его основе, но можно использовать любой другой интсрумент который вам нравится.<br>
![пример документации](https://github.com/vomerf/modile_app/assets/101176519/78b4758d-c504-42e3-a23e-945e7db35323)
Например разберем GET запрос получение списка заказов плюс посмотрим как работает фильтрация.<br>
Чтобы выполнить get запрос требуется нажать на кнопку get /order/ откроется данное окно<br>
![get_request](https://github.com/vomerf/modile_app/assets/101176519/5097f149-858d-4f71-b337-acc3f24a898f)
Чтобы можно было ввести какие-то данные и сделать запрос нужно нажать кнопку try it out<br>
После того как нажали можно вводить данные в поля со статусом и датами это наша фильтрация, если ничего не вводить то вернется ролный список заказов.<br>
Если мы хотим сделать какую-то выборку по дате или по статусу или по тому и другому одновременно заполняем соответствующие поля напрмер вот так<br>
![фильтрация](https://github.com/vomerf/modile_app/assets/101176519/ae663a91-132e-4f80-a841-dddd86aa3056)
Тут мы передали данные в query параметры статус и поля с датами, чтобы посмотреть какие статусы есть можно просто ввести в поле статус что угодно нажать выполнить<br>
он выдаст ошибку что данные должны соответствовать конкретному значению, можете потом выбрать одно из них.Даты работают промежутками начало создания мы заполняем два поля то есть промежуток вермени
в котором мы хотим взять время создания и также с временем завершения. Вот такой ответ у меня получился с переданными параметрами.<br>
![Снимок экрана (41)](https://github.com/vomerf/modile_app/assets/101176519/6ce3aa14-9f60-4966-b9c5-f187802d991f)
Разберем еще Post запрос, создание заказа.<br>
Все практически тоже самое только данные отправляются в теле запроса в json формате.<br>
![создание](https://github.com/vomerf/modile_app/assets/101176519/7b74dfb4-1db6-41d7-89fd-61c44e6b870e)
Если нажмете execute с данными параметрами он вам не даст этого сделать потому что ни у одного и заказчика нету такого номера телефона.<br>
Тут надо знать какому заказчику соответствует какой номер, посмотреть можно через админку или если использовать терминал то можно напрмер psql.<br>
Какие-то поля можно убрать они не обязательные, а какие-то нет, например phone_number обязательное поле как и customer_id.
Напрмер Post запрос с такими данными создаст заказ:
```
{
  "customer_id": 1,
  "phone_number": "89134430853",
  "outlet_id": 5
}
```
![Снимок экрана (44)](https://github.com/vomerf/modile_app/assets/101176519/c92e3dc4-3fe1-4c34-a9f3-2d56f6ba69d2)
Дальше по аналогии редактирование и удаление.<br>
Для простоты можно пользоваться админкой.
